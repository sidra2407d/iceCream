@model IEnumerable<icecream.Models.User>

@{
 ViewData["Title"] = "Users";
 Layout = "~/Views/Shared/_DashLayout.cshtml";
}

<style>
/* Professional users list styling */
.users-card {
 background: #ffffff;
 border-radius:12px;
 padding:1.25rem;
 box-shadow:06px18px rgba(37,44,97,0.06);
 border:1px solid rgba(33,37,41,0.04);
}
.users-header {
 display: flex;
 align-items: center;
 justify-content: space-between;
 gap:12px;
 margin-bottom:16px;
}
.header-left h3 { margin:0; font-size:1.25rem; }
.header-left p { margin:0; color: #6b6b6b; font-size:0.95rem; }

.user-avatar {
 width:48px;
 height:48px;
 border-radius:50%;
 display:inline-flex;
 align-items:center;
 justify-content:center;
 background: linear-gradient(135deg,#ff9a9e,#fad0c4);
 color:#fff;
 font-weight:700;
 margin-right:12px;
 font-size:1rem;
}
.table-responsive { overflow:auto; }
.users-table { width:100%; border-collapse:collapse; }
.users-table thead th {
 background:#fff5f7;
 color:#3a2a3a;
 font-weight:700;
 padding:12px14px;
 text-align:left;
 border-bottom:1px solid rgba(0,0,0,0.04);
}
.users-table tbody td { padding:18px14px; vertical-align:middle; border-bottom:1px solid rgba(0,0,0,0.03); }
.users-table tbody tr:last-child td { border-bottom: none; }

.badge-status { display:inline-block; padding:6px10px; border-radius:999px; font-size:0.85rem; }
.badge-paid { background:#e6ffed; color:#1f7a3a; }
.badge-unpaid { background:#fff4f4; color:#b02a37; }

.action-btns a { margin-left:8px; text-decoration:none; }
.action-icons i { font-size:1.05rem; }
.search-input { width:280px; }

.pagination { list-style:none; padding-left:0; display:flex; gap:.4rem; margin:0; }
.pagination .page-item .page-link { display:inline-block; padding:.375rem .6rem; border-radius:.375rem; border:1px solid rgba(0,0,0,0.06); background:#fff; color:#333; }
.pagination .page-item.active .page-link { background:#f8f0f6; border-color:rgba(0,0,0,0.06); }

/* Responsive adjustments */
@@media (max-width:991.98px) {
 .users-table thead th:nth-child(4), .users-table thead th:nth-child(5) { display:none; }
 .users-table tbody td:nth-child(4), .users-table tbody td:nth-child(5) { display:none; }
}
@@media (max-width:575.98px) {
 .users-header { flex-direction:column; align-items:flex-start; gap:8px; }
 .search-input { width:100%; max-width:none; }
 .user-avatar { width:40px; height:40px; }
 .users-table tbody td { padding:12px8px; }
}
</style>

<div class="container py-4">
 <div class="users-card">
 <div class="users-header">
 <div class="header-left">
 <h3>Users <small class="text-muted">(@(Model?.Count() ??0))</small></h3>
 <p>Manage registered users and membership details</p>
 </div>

 <div class="d-flex align-items-center gap-2">
 <form method="get" class="d-flex align-items-center" onsubmit="return false;">
 <input name="q" class="form-control form-control-sm search-input" placeholder="Search by name or email" />
 </form>
 @* If you want Add user button enable it: *@
 @* <a asp-action="Create" class="btn btn-sm btn-primary"><i class="fas fa-user-plus"></i> Add User</a> *@
 </div>
 </div>

 <div class="table-responsive">
 <table class="users-table">
 <thead>
 <tr>
 <th style="min-width:260px;">User</th>
 <th>Email</th>
 <th>Phone</th>
 <th>Membership</th>
 <th>Payment</th>
 <th>Created</th>
 <th style="width:120px; text-align:right;">Actions</th>
 </tr>
 </thead>
 <tbody>
 @if (Model != null && Model.Any())
 {
 foreach (var item in Model)
 {
 var initials = string.Join("", (item.FullName ?? "").Split(' ').Where(s => !string.IsNullOrWhiteSpace(s)).Select(s => s[0])).ToUpper();
 <tr>
 <td>
 <div style="display:flex; align-items:center;">
 <div class="user-avatar">@initials</div>
 <div>
 <div style="font-weight:600;">@item.FullName</div>
 <div class="text-muted" style="font-size:0.88rem;">@item.Address</div>
 </div>
 </div>
 </td>
 <td><div style="font-size:0.95rem;">@item.Email</div></td>
 <td>@item.Phone</td>
 <td>
 <div>@item.MembershipType</div>
 <div class="text-muted" style="font-size:0.85rem;">@String.Format(System.Globalization.CultureInfo.CurrentCulture, "{0:C}", item.MembershipAmount)</div>
 </td>
 <td>
 @if (!string.IsNullOrEmpty(item.PaymentStatus) && string.Equals(item.PaymentStatus, "Paid", StringComparison.OrdinalIgnoreCase))
 {
 <span class="badge-status badge-paid">Paid</span>
 }
 else
 {
 <span class="badge-status badge-unpaid">Pending</span>
 }
 </td>
 <td>@(item.CreatedAt.HasValue ? item.CreatedAt.Value.ToString("yyyy-MM-dd") : "-")</td>
 <td style="text-align:right;">
 <div class="action-icons">
 <a asp-action="Details" asp-route-id="@item.UserId" class="text-decoration-none me-2" title="View"><i class="fas fa-eye" style="color:#0d6efd"></i></a>
 @* Edit disabled by design *@
 @* <a asp-action="Edit" asp-route-id="@item.UserId" class="text-decoration-none me-2" title="Edit"><i class="fas fa-edit" style="color:#6c757d"></i></a> *@
 <a asp-action="Delete" asp-route-id="@item.UserId" class="text-decoration-none" title="Delete"><i class="fas fa-trash" style="color:#dc3545"></i></a>
 </div>
 </td>
 </tr>
 }
 }
 else
 {
 <tr>
 <td colspan="7" class="text-center text-muted">No users found.</td>
 </tr>
 }
 </tbody>
 </table>
 </div>

 <div class="d-flex justify-content-between align-items-center mt-3">
 <div class="text-muted">Showing @(Model?.Count() ??0) users</div>
 <nav aria-label="Page navigation">
 <ul class="pagination pagination-sm mb-0">
 <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
 <li class="page-item active"><a class="page-link" href="#">1</a></li>
 <li class="page-item"><a class="page-link" href="#">2</a></li>
 <li class="page-item"><a class="page-link" href="#">Next</a></li>
 </ul>
 </nav>
 </div>
 </div>
</div>

@section Scripts {
 <script>
 // client-side search (filter rows)
 (function(){
 var input = document.querySelector('input[name="q"]');
 if(!input) return;
 input.addEventListener('input', function(e){
 var q = e.target.value.toLowerCase();
 var rows = document.querySelectorAll('.users-table tbody tr');
 rows.forEach(function(r){
 var text = r.innerText.toLowerCase();
 r.style.display = text.indexOf(q) === -1 ? 'none' : '';
 });
 });
 })();
 </script>
}
