@using Microsoft.AspNetCore.Http

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - CreamyBar Admin</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="~/dashboard/css/dashboard.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/dashboard/css/style.css" asp-append-version="true" />

    <style>
        /* Polished sidebar theme — increased width to280px */
        .sidebar {
            width: 280px;
            padding: 22px;
            background: linear-gradient(180deg, #3b2d610%, #2f2a6b100%);
            color: #fff;
            min-height: 100vh;
            box-shadow: inset -30px 60px rgba(0, 0, 0, 0.06);
            position: fixed;
            left: 0;
            top: 0;
        }

        /* push main content to the right to accommodate wider sidebar */
        .main-content {
            margin-left: 280px;
            transition: margin-left 180ms ease;
        }

        .logo-container {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 46px;
            height: 46px;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ff9a9e, #ffd194);
            box-shadow: 08px 18px rgba(0, 0, 0, 0.12);
            color: #fff;
            font-size: 18px;
        }

        .logo-text {
            color: #ffd6f0;
            font-family: 'Dancing Script', cursive;
            font-size: 1.15rem;
        }

        .nav-links {
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .nav-links li {
            margin-bottom: 12px;
        }

        .nav-links a {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 10px 12px;
            color: rgba(255, 255, 255, 0.95) !important;
            text-decoration: none;
            border-radius: 10px;
            transition: all 180ms ease;
        }

        .icon-circle {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1.1rem;
            box-shadow: 06px 18px rgba(0, 0, 0, 0.12);
        }

        .icon-circle i {
            color: #fff !important;
        }

        .nav-text {
            font-weight: 600;
            color: #fff !important;
            padding: 8px 10px;
            border-radius: 8px;
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .nav-links a:hover .nav-text {
            background: rgba(255, 255, 255, 0.04);
        }

        /* Active: bright accent (project pink) with white icon */
        .nav-links a.active {
            background: rgba(255, 255, 255, 0.03);
        }

        .nav-links a.active .nav-text {
            background: linear-gradient(90deg, #ff6a88, #ff9076);
            color: #fff !important;
            box-shadow: 08px 22px rgba(255, 105, 136, 0.12);
        }

        .nav-links a.active .icon-circle {
            transform: translateX(-4px);
            box-shadow: 10px 30px rgba(0, 0, 0, 0.14);
        }

        /* per-item icon color variations */
        .nav-item-dash .icon-circle {
            background: linear-gradient(135deg, #ffb199, #ff7a88);
        }

        .nav-item-users .icon-circle {
            background: linear-gradient(135deg, #ffd194, #ffb86b);
        }

        .nav-item-orders .icon-circle {
            background: linear-gradient(135deg, #8bd3dd, #4fb3c5);
        }

        .nav-item-analytics .icon-circle {
            background: linear-gradient(135deg, #b39df4, #7c5cf6);
        }

        .nav-item-settings .icon-circle {
            background: linear-gradient(135deg, #f6d365, #fda085);
        }

        .nav-item-feedback .icon-circle {
            background: linear-gradient(135deg, #f6c6e7, #f08ad6);
        }

        .nav-item-recipes .icon-circle {
            background: linear-gradient(135deg, #ffd1d9, #ff9fb8);
        }

        .nav-item-books .icon-circle {
            background: linear-gradient(135deg, #ffd89b, #ffb84d);
        }

        /* ensure text always readable */
        .nav-links a .nav-text,
        .nav-links a {
            color: #ffffff !important;
        }

        /* responsive: collapse to icons-only on small viewports and reset main-content margin */
        @@media (max-width: 991.98px) {
            .sidebar {
                width: 72px;
                padding: 12px;
                position: fixed;
            }

            .nav-text {
                display: none;
            }

            .nav-links a {
                justify-content: center;
                padding: 12px;
            }

            .main-content {
                margin-left: 72px;
            }
        }
    </style>

    @RenderSection("Styles", required: false)
</head>

<body>

    <nav class="sidebar">
        <div class="logo-container">
            <div class="logo-icon"><i class="fa-solid fa-ice-cream"></i></div>
            <span class="logo-text">CreamyBar</span>
        </div>

        <ul class="nav-links">
            <li>
                <a asp-controller="Dashboard" asp-action="Index" class="nav-item-dash active" title="Dashboard"
                    aria-label="Dashboard">
                    <span class="icon-circle"><i class="fa-solid fa-chart-line" aria-hidden="true"></i></span>
                    <span class="nav-text">Dashboard</span>
                </a>
            </li>

            <li>
                <a asp-controller="Users" asp-action="Index" class="nav-item-users" title="Users" aria-label="Users">
                    <span class="icon-circle"><i class="fa-solid fa-user-group" aria-hidden="true"></i></span>
                    <span class="nav-text">Users</span>
                </a>
            </li>

            <li>
                <a asp-controller="Orders" asp-action="Index" class="nav-item-orders" title="Orders" aria-label="Orders">
                    <span class="icon-circle"><i class="fa-solid fa-receipt" aria-hidden="true"></i></span>
                    <span class="nav-text">Orders</span>
                </a>
            </li>

            <li>
                <a asp-controller="Analytics" asp-action="Index" class="nav-item-analytics" title="Analytics"
                    aria-label="Analytics">
                    <span class="icon-circle"><i class="fa-solid fa-chart-pie" aria-hidden="true"></i></span>
                    <span class="nav-text">Analytics</span>
                </a>
            </li>

            <li>
                <a asp-controller="Settings" asp-action="Index" class="nav-item-settings" title="Settings"
                    aria-label="Settings">
                    <span class="icon-circle"><i class="fa-solid fa-gear" aria-hidden="true"></i></span>
                    <span class="nav-text">Settings</span>
                </a>
            </li>

            <li>
                <a asp-controller="Feedbacks" asp-action="Index" class="nav-item-feedback" title="Feedback"
                    aria-label="Feedback">
                    <span class="icon-circle"><i class="fa-solid fa-comments" aria-hidden="true"></i></span>
                    <span class="nav-text">Feedback</span>
                </a>
            </li>

            <li>
                <a asp-controller="Recipes" asp-action="Index" class="nav-item-recipes" title="Recipes"
                    aria-label="Recipes">
                    <span class="icon-circle"><i class="fa-solid fa-utensils" aria-hidden="true"></i></span>
                    <span class="nav-text">Recipes</span>
                </a>
            </li>

            <li>
                <a asp-controller="RecipeBooks" asp-action="Index" class="nav-item-books" title="Recipe Books"
                    aria-label="Recipe Books">
                    <span class="icon-circle"><i class="fa-solid fa-book-open" aria-hidden="true"></i></span>
                    <span class="nav-text">Recipe Books</span>
                </a>
            </li>

        </ul>
    </nav>

    <main class="main-content">

        <header class="header">
            <h1>
                <div class="icecream-cone"
                    style="width:40px; height:48px; display:inline-block; vertical-align:middle;">
                    <div class="scoop" style="width:32px; height:28px;"></div>
                    <div class="cone" style="width:22px; height:24px;"></div>
                </div>
                CreamyBar Admin Dashboard
            </h1>
            @if (Context.Session.GetString("Role") == "Admin")
            {
                <div class="admin-info">
                    <!-- Avatar (initials of admin) -->
                    <div class="admin-avatar">
                        @{
                            var name = Context.Session.GetString("Username") ?? "Admin";
                            var initials = string.Join("", name.Split(' ').Select(n => n[0])).ToUpper();
                        }
                        @initials
                    </div>

                    <!-- Name & Role -->
                    <div>
                        <h3>@Context.Session.GetString("Username")</h3>
                        <p>Super Administrator</p> <!-- or dynamically show Role -->
                    </div>

                    <!-- Logout -->
                    <a asp-action="Logout" asp-controller="Users" class="logout-btn" title="Logout" aria-label="Logout">
                        <i class="fa-solid fa-right-from-bracket"></i> Logout
                    </a>
                </div>
            }
        </header>

        <div class="container-fluid">
            @RenderBody()
        </div>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/dashboard/js/chart.js" asp-append-version="true"></script>
    <script src="~/dashboard/js/main.js" asp-append-version="true"></script>
    <script src="~/dashboard/js/navigation.js" asp-append-version="true"></script>


    @RenderSection("Scripts", required: false)
</body>

</html>
